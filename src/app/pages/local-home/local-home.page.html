<ion-header [translucent]="true">
  <ion-toolbar>
      <ion-title>Music Player</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="requestAudioPermissions(); openFileSelector()">
        <ion-icon name="cloud-upload"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" [class.dark-mode]="isDarkMode" class="ion-padding-bottom">
  <!-- Hidden file input -->
  <input type="file" #fileInput style="display:none" 
         accept=".mp3,.m4a,.aac,.wav,.ogg,.flac,.opus" 
         multiple (change)="onFileSelected($event)">

  <!-- Local Music Section -->
  <ion-card-header>
    Your Music
  </ion-card-header>

  <div *ngIf="localMusic.length === 0" class="empty-state">
    <ion-icon name="musical-notes"></ion-icon>
      <h3>No local music found</h3>
      <p>Upload music files to get started</p>
    <div>
    <ion-button fill="clear" (click)="requestAudioPermissions(); openFileSelector()">
      <ion-icon name="add"></ion-icon>
      Add Files
      </ion-button>
    </div>
  </div>

  <div class="horizontal-scroll-container" *ngIf="localMusic.length > 0">
    <div *ngFor="let track of localMusic" 
         class="music-card" 
         (click)="playTrack(track)">
      <div class="album-art-container">
        <img [src]="track.imageUrl || 'assets/music-bg.png'" 
             [alt]="track.title" 
             class="album-art">
        <div class="play-overlay">
          <ion-icon name="play"></ion-icon>
        </div>
      </div>
      <div class="track-info">
        <h3 class="track-title">{{track.title}}</h3>
        <p class="track-artist">{{track.artist}}</p>
      </div>
    </div>
  </div>
</ion-content>

<!-- Removed mini-player from local-home since we're using the global mini-player component in tabs.page.html -->