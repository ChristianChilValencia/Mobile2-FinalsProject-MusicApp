<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/library"></ion-back-button>
    </ion-buttons>
    <ion-title>Upload Music</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="upload-container">
    <div class="upload-section">
      <h2>Add Local Audio Files</h2>
      <p>Support formats: MP3, AAC, WAV, OGG, FLAC, OPUS, M4A</p>
      
      <!-- Hidden file input -->
      <input type="file" #fileInput style="display:none" 
             accept=".mp3,.m4a,.aac,.wav,.ogg,.flac,.opus" 
             multiple (change)="onFileSelected($event)">
      
      <div class="upload-area" (click)="requestAudioPermissions(); openFileSelector()">
        <ion-icon name="cloud-upload"></ion-icon>
        <p>Tap to select files or drag and drop</p>
      </div>
    </div>
    
    <div class="recently-added-section" *ngIf="recentlyAddedTracks.length > 0">
      <h2>Recently Added</h2>
      
      <div class="horizontal-scroll-container">
        <div *ngFor="let track of recentlyAddedTracks" 
             class="music-card" 
             (click)="playTrack(track)">
          <div class="album-art-container">
            <img [src]="track.imageUrl || 'assets/music-bg.png'" 
                 [alt]="track.title" 
                 class="album-art">
            <div class="play-overlay">
              <ion-icon name="play"></ion-icon>
            </div>
          </div>
          <div class="track-info">
            <h3 class="track-title">{{track.title}}</h3>
            <p class="track-artist">{{track.artist}}</p>
          </div>
        </div>
      </div>
    </div>
    
    <div class="uploads-pending" *ngIf="pendingUploads.length > 0">
      <h2>Uploading Files</h2>
      
      <div class="upload-item" *ngFor="let upload of pendingUploads">
        <div class="upload-details">
          <div class="filename">{{ upload.file.name }}</div>
          <div class="status">{{ upload.status }}</div>
        </div>
        <ion-progress-bar [value]="upload.progress"></ion-progress-bar>
      </div>
    </div>
  </div>
</ion-content>
